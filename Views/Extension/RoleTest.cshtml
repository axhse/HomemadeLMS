@{
    ViewData["Title"] = "Тест Белбина";
    ViewData["NavbarMenu"] = MenuBuilder.GetDefaultNavbarMenu();

    var allTestContent = new string[][] {
        new string[] {
            "Что я могу предложить команде:",
            "Я думаю, что в состоянии быстро воспринимать и использовать новые возможности",
            "Я легко кооперируюсь с людьми разных типов",
            "Один из моих главных активов – продуцировать новые идеи",
            "Я способен вовлекать людей, которые, по моему мнению, могут внести большой вклад в достижение групповых целей",
            "Мои личные способности – эффективно доводить дело до самого конца",
            "Я не представляю себе даже временного снижения своей популярности, даже если это приведет к увеличению прибыли",
            "Обычно я чувствую, что реалистично и что дееспособно",
            "Я способен предложить весомые аргументы в пользу другой линии действий, не  провоцируя при этом предубеждений и предвзятости",
        },
        new string[] {
            "Что характеризует меня как члена команды:",
            "Я чувствую себя неуютно на собраниях, даже если они четко структурированы и продуманно организованы",
            "Я склонен полагаться на людей, которые хорошо аргументируют свою точку зрения еще до того, как она была всесторонне обсуждена",
            "Когда группа обсуждает новые идеи, я склонен слишком много говорить",
            "Мои личные отношения мешают мне поддерживать коллег с энтузиазмом",
            "Когда надо сделать какое-либо дело, некоторые люди считают, что я действую агрессивно и авторитарно",
            "Я затрудняюсь брать на себя лидерскую роль, может, потому, что слишком чувствителен к чувствам и настроениям группы",
            "У меня есть склонность настолько увлекаться собственными идеями, что я забываю о том, что происходит вокруг",
            "Мои коллеги считают, что я слишком забочусь о незначительных деталях и боюсь  риска, что дело может быть испорчено",
        },
        new string[] {
            "Когда я работаю с другими над проектом:",
            "Я могу хорошо влиять на других людей, при этом не оказывая на них сильного давления",
            "Мое шестое чувство подсказывает и предохраняет меня от ошибок и инцидентов, которые иногда случаются из-за небрежности",
            "Во имя достижения главных целей я готов ускорять события, не тратя время на обсуждение",
            "От меня всегда можно ожидать чего-то оригинального",
            "Я всегда готов поддержать хорошее предложение, которое принесет выгоду всем",
            "Я постоянно отслеживаю последние идеи и новейшие достижения",
            "Я думаю, что мои способности к суждениям и оценкам могут внести большой вклад в принятие правильных решений",
            "На меня всегда можно положиться на завершающем этапе работы",
        },
        new string[] {
            "Мое отношение и интерес к групповой работе:",
            "Я искренне желаю узнать своих коллег получше",
            "Я не боюсь ни оспаривать точку зрения другого человека, ни остаться в меньшинстве",
            "Обычно я могу доказать несостоятельность неудачного предложения",
            "Я думаю, что я способен хорошо выполнять любую функцию ради выполнения общего плана",
            "Часто я избегаю очевидных решений и прихожу вместо этого к неожиданным решениям проблемы",
            "Я стремлюсь все, что делаю, доводить до совершенства",
            "Я готов использовать контакты вне группы",
            "Хотя я всегда открыт для восприятия различных точек зрения, я не испытываю трудностей при принятии решения",
        },
        new string[] {
            "Я чувствую удовлетворение от работы, потому что ...",
            "Мне нравится анализировать ситуации и оценивать возможные направления деятельности",
            "Мне интересно находить практические пути решения проблемы",
            "Мне приятно чувствовать, что я помогаю созданию хороших отношений на работе",
            "Часто я имею сильное влияние на принимаемые решения",
            "Я имею открытые, дружеские отношения с людьми, которые могут предложить что-то новенькое",
            "Я могу убеждать людей в необходимости определенной линии действий",
            "Я чувствую себя хорошо дома, когда могу уделить максимум внимания заданию",
            "Я люблю работать с чем-то, что стимулирует мое воображение",
        },
        new string[] {
            "Когда задание трудное и незнакомое ...",
            "Я откладываю дело на время и размышляю над проблемой",
            "Я готов сотрудничать с людьми, которые более позитивно и с большим энтузиазмом относятся к проблеме",
            "Я пытаюсь сделать задание проще, подыскивая людей в группе, которые могут взять на себя решение части проблемы",
            "Мое врожденное ощущение времени позволяет мне выдерживать сроки выполнения задания",
            "Я думаю, мне удастся сохранить ясность мысли и спокойствие",
            "Даже под давлением внешних обстоятельств я не отступаю от цели",
            "Я готов взять лидерские обязанности на себя, если чувствую, что группа не прогрессирует",
            "Я бы начал дискуссию с целью стимулировать появление новых мыслей, способствующих решению проблемы",
        },
        new string[] {
            "Проблемы, возникающие при работе в группах:",
            "Я склонен выражать свое нетерпение по отношению к людям, которые стоят на пути развития прогресса (мешают)",
            "Другие могут критиковать меня за то, что я слишком аналитичен и не подключаю интуицию",
            "Мое желание убедиться в том, что работа выполняется с высоким качеством, может иногда привести к задержке",
            "Мне быстро все надоедает, и я полагаюсь на то, что кто-то из группы стимулирует мой интерес",
            "Мне трудно приступить к решению задачи, не имея четкой цели",
            "Иногда мне трудно объяснить и описать проблему в комплексе",
            "Я знаю, что я требую от других того, что сам не могу выполнить",
            "Я затрудняюсь выражать собственное мнение, когда нахожусь в очевидной оппозиции к большинству",
        },
    };
}

<div class="col-md-12 col-lg-8">
    <p>
        @(@"В каждом из семи блоков распределите ровно по 10 баллов
        между вариантами согласно тому, как вы полагаете они
        лучше всего подходят вашему собственному поведению.
        Если вы согласны с каким-либо утверждением на все 100%, вы можете отдать ему все 10 баллов.
        Необходимо присваивать утверждениям от 2 баллов (или 0).")
    </p>
    <div class="mt-5"></div>
    <form method="POST">
        @for (int blockIndex = 1; blockIndex <= allTestContent.Length; blockIndex++)
        {
            var content = allTestContent[blockIndex - 1];
            <div class="mt-5"></div>
            <p class="fw-bold" id=@($"question{blockIndex}")>@content[0]</p>
            @for (int ansIndex = 1; ansIndex < content.Length; ansIndex++)
            {
                var name = $"b{blockIndex}a{ansIndex}Score";
                <div class="mt-1" align="left">
                    <div class="d-inline-flex" align="left">
                        <div class="me-2">
                            <input type="number" class="form-control text-center" style="width: 70px;"
                           id=@(name + "Input") name=@name value="0" min="0" max="10"
                           oninput=@($"handleScoreInput({blockIndex},{ansIndex})")>
                        </div>
                        <div class="align-self-center">
                            <label for=@(name + "Input")>@content[ansIndex]</label>
                        </div>
                    </div>
                </div>
            }
        }
        <div class="mt-5">
            <button type="submit" class="btn btn-secondary">Завершить тест</button>
        </div>
    </form>
</div>

<script type="text/javascript">
    function handleScoreInput(blockIndex, ansIndex) {
        let scoreInputId = `b${blockIndex}a${ansIndex}ScoreInput`;
        let scoreInput = document.getElementById(scoreInputId);
        if (scoreInput.oldValue === undefined || scoreInput.oldValue === null) {
            scoreInput.oldValue = '0';
        }
        if (scoreInput.value === '1') {
            scoreInput.value = scoreInput.oldValue === '0' ? '2' : '0';
        }
        let totalScore = 0;
        for (let currentAnsIndex = 1; currentAnsIndex <= 8; currentAnsIndex++) {
            let currentScoreInputId = `b${blockIndex}a${currentAnsIndex}ScoreInput`;
            let currentScoreInput = document.getElementById(currentScoreInputId);
            totalScore += parseInt(currentScoreInput.value);
        }
        if (totalScore > 10) {
            totalScore -= scoreInput.value - scoreInput.oldValue;
            scoreInput.value = scoreInput.oldValue;
        }
        let titleId = `question${blockIndex}`;
        let title = document.getElementById(titleId);
        if (totalScore == 10) {
            title.classList.add("text-success");
        } else {
            title.classList.remove("text-success");
        }
        scoreInput.oldValue = scoreInput.value;
    }
</script>
